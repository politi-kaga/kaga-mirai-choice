<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kaga-mirai-choice | åŠ è³€å¸‚è­°ä¼šè­°å“¡é¸æŒ™2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Hiragino Sans', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ã‚·ãƒƒã‚¯', 'Yu Gothic', 'ãƒ¡ã‚¤ãƒªã‚ª', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8fafc;
        }
        
        .header {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            color: white;
            padding: 0.75rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.25rem;
            font-weight: bold;
            text-decoration: none;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .logo-icon {
            width: 32px;
            height: 32px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
        
        .nav-links {
            display: flex;
            gap: 1.5rem;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s;
        }
        
        .nav-links a:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .hero {
            text-align: center;
            padding: 2rem 0;
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
        }
        
        .hero h1 {
            font-size: 2rem;
            color: #1e40af;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        
        .hero-subtitle {
            font-size: 1rem;
            color: #64748b;
            margin-bottom: 1.5rem;
        }
        
        .hero-divider {
            display: none;
        }
        
        .quick-nav {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .quick-nav-item {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: all 0.3s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            border: 2px solid transparent;
        }
        
        .quick-nav-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
            border-color: #3b82f6;
        }
        
        .quick-nav-item h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: #1e40af;
        }
        
        .quick-nav-item p {
            font-size: 0.9rem;
            color: #64748b;
        }
        
        .election-info {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .election-info h2 {
            color: #1e40af;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
        }
        
        .info-item {
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid #3b82f6;
            transition: all 0.3s;
            position: relative;
        }
        
        .info-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .info-item strong {
            color: #1e40af;
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .info-item span {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1e293b;
        }
        
        /* PCç‰ˆã§ã®ç‰¹åˆ¥ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
        @media (min-width: 1024px) {
            .info-grid {
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: repeat(2, 1fr);
            }
            
            .info-item:nth-child(1) { border-left-color: #ef4444; }
            .info-item:nth-child(2) { border-left-color: #f97316; }
            .info-item:nth-child(3) { border-left-color: #eab308; }
            .info-item:nth-child(4) { border-left-color: #22c55e; }
            .info-item:nth-child(5) { border-left-color: #3b82f6; }
            .info-item:nth-child(6) { border-left-color: #8b5cf6; }
        }
        
        .candidates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .candidate-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .candidate-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
            border-color: #3b82f6;
        }
        
        .candidate-photo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #e5e7eb, #d1d5db);
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 0.8rem;
            overflow: hidden;
        }
        
        .candidate-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        .candidate-photo span {
            text-align: center;
        }
        
        .candidate-name {
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 0.5rem;
            color: #1e40af;
        }
        
        .candidate-info {
            font-size: 0.85rem;
            color: #64748b;
            text-align: center;
            line-height: 1.4;
        }
        
        .party-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin: 0;
            vertical-align: baseline;
            line-height: 1.3;
            border: 1px solid currentColor;
        }
        
        .party-ldp { background: rgba(231, 1, 18, 0.1); color: #e70112; }
        .party-independent { background: #f3f4f6; color: #6b7280; }
        .party-komeito { background: rgba(245, 88, 129, 0.1); color: #f55881; }
        .party-communist { background: rgba(77, 120, 212, 0.1); color: #4d78d4; }
        .party-constitutional { background: rgba(2, 65, 151, 0.1); color: #024197; }
        .party-ishin { background: rgba(55, 194, 0, 0.1); color: #37c200; }
        .party-kokumin { background: rgba(251, 190, 0, 0.1); color: #fbbe00; }
        
        .comparison-section {
            margin: 2rem 0;
        }
        
        .category-scroll-container {
            position: relative;
            margin-bottom: 2rem;
        }
        
        .category-tabs {
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding: 0.5rem 1rem;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            padding-left: 2rem;
        }
        
        .category-tabs::-webkit-scrollbar {
            height: 4px;
        }
        
        .category-tabs::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 2px;
        }
        
        .category-tabs::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 2px;
        }
        
        .category-tab {
            padding: 0.75rem 1.25rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
            font-weight: 600;
            white-space: nowrap;
            flex-shrink: 0;
            color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .category-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        /* ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®è‰²åˆ†ã‘ - å¸¸ã«ã‚«ãƒ©ãƒ•ãƒ« */
        .category-tab:nth-child(1) { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .category-tab:nth-child(2) { background: linear-gradient(135deg, #10b981, #059669); }
        .category-tab:nth-child(3) { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .category-tab:nth-child(4) { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .category-tab:nth-child(5) { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }
        .category-tab:nth-child(6) { background: linear-gradient(135deg, #06b6d4, #0891b2); }
        .category-tab:nth-child(7) { background: linear-gradient(135deg, #f97316, #ea580c); }
        .category-tab:nth-child(8) { background: linear-gradient(135deg, #84cc16, #65a30d); }
        .category-tab:nth-child(9) { background: linear-gradient(135deg, #6366f1, #4f46e5); }
        .category-tab:nth-child(10) { background: linear-gradient(135deg, #ec4899, #db2777); }
        
        /* ãã®ä»–ãƒœã‚¿ãƒ³ã‚’æ¿ƒã„ã‚°ãƒ¬ãƒ¼ã« */
        .category-tab:last-child { background: linear-gradient(135deg, #4b5563, #374151) !important; }
        
        /* ã€Œãã®ä»–ã€ã‚«ãƒ†ã‚´ãƒªã‚’å«ã‚€ãƒœã‚¿ãƒ³ã‚’æ¿ƒã„ã‚°ãƒ¬ãƒ¼ã« */
        .category-tab[data-category*="ãã®ä»–"] { background: linear-gradient(135deg, #4b5563, #374151) !important; }
        
        .category-tab.active {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
            filter: brightness(1.1) saturate(1.2);
        }
        
        .category-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #e70112;
            border-radius: 2px;
        }
        
        /* èµ¤è‰²ãƒœã‚¿ãƒ³ï¼ˆé˜²ç½ãƒ»å¾©èˆˆã€å±æ©Ÿç®¡ç†ï¼‰ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ä¸‹ç·šã‚’ç™½ã« */
        .category-tab:nth-child(1).active::after {
            background: rgba(255, 255, 255, 0.9);
        }
        
        /* é˜²ç½ãƒ»å¾©èˆˆã‚„å±æ©Ÿç®¡ç†ã‚’å«ã‚€ã‚«ãƒ†ã‚´ãƒªã®ä¸‹ç·šã‚’ç™½ã« */
        .category-tab[data-category*="é˜²ç½"].active::after,
        .category-tab[data-category*="å¾©èˆˆ"].active::after,
        .category-tab[data-category*="å±æ©Ÿ"].active::after {
            background: rgba(255, 255, 255, 0.9);
        }
        
        .scroll-indicator {
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(90deg, transparent, rgba(248,250,252,0.95));
            padding: 0.75rem;
            pointer-events: none;
            font-size: 1.2rem;
            color: #3b82f6;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.7; transform: translateY(-50%) scale(1); }
            50% { opacity: 1; transform: translateY(-50%) scale(1.1); }
        }
        
        .question-card {
            background: white;
            border-radius: 12px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        
        .question-header {
            padding: 1.25rem;
            cursor: pointer;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
        }
        
        .question-header:hover {
            background: #f8fafc;
        }
        
        .question-title {
            font-weight: 600;
            color: #1e40af;
            font-size: 0.95rem;
        }
        
        .question-arrow {
            font-size: 0.8rem;
            color: #64748b;
            transition: transform 0.3s;
        }
        
        .question-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .question-content.active {
            max-height: 1000px;
            padding: 1rem;
        }
        
        .answer-item {
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
        }
        
        .answer-candidate {
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .answer-text {
            font-size: 0.9rem;
            line-height: 1.5;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }
        
        .candidate-detail {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .candidate-header {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
            align-items: flex-start;
        }
        
        .candidate-photo-large {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #e5e7eb, #d1d5db);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            flex-shrink: 0;
            overflow: hidden;
        }
        
        .candidate-photo-large img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }
        
        .candidate-basic-info h2 {
            font-size: 1.5rem;
            color: #1e40af;
            margin-bottom: 1rem;
        }
        
        .candidate-basic-info .info-row {
            display: flex;
            gap: 2rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .candidate-basic-info .info-row span:first-child {
            color: #64748b;
            min-width: 80px;
        }
        
        .sns-links {
            margin-top: 1rem;
        }
        
        .sns-links h4 {
            color: #1e40af;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .sns-links a {
            display: inline-block;
            margin-right: 1rem;
            margin-bottom: 0.5rem;
            padding: 0.25rem 0.75rem;
            background: #f1f5f9;
            color: #3b82f6;
            text-decoration: none;
            border-radius: 15px;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .sns-links a:hover {
            background: #3b82f6;
            color: white;
        }
        
        .policy-section {
            margin-top: 2rem;
        }
        
        .policy-section h3 {
            color: #1e40af;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .policy-item {
            background: #f8fafc;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid #3b82f6;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .policy-item div {
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }
        
        .policy-category {
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
            color: #64748b;
        }
        
        .hidden {
            display: none;
        }
        
        /* ãƒ•ãƒƒã‚¿ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .footer {
            background: linear-gradient(135deg, #1e293b, #334155);
            color: white;
            margin-top: 3rem;
            padding: 2rem 0;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .footer-content {
            text-align: center;
        }
        
        .footer-about {
            margin-bottom: 1.5rem;
        }
        
        .footer-link {
            color: #60a5fa;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 600;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            padding-bottom: 2px;
        }
        
        .footer-link:hover {
            color: #93c5fd;
            border-bottom-color: #93c5fd;
        }
        
        .footer-info {
            font-size: 0.9rem;
            color: #cbd5e1;
        }
        
        .footer-org {
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .footer-contact {
            margin: 0;
        }
        
        .footer-email {
            color: #60a5fa;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-email:hover {
            color: #93c5fd;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 0.5rem 0;
            }
            
            .nav {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem 1rem;
            }
            
            .nav-links {
                gap: 1rem;
            }
            
            .hero h1 {
                font-size: 1.5rem;
            }
            
            .hero-subtitle {
                font-size: 0.9rem;
            }
            
            .candidate-header {
                flex-direction: column;
                text-align: center;
                align-items: center;
            }
            
            .candidate-photo-large {
                width: 150px;
                height: 150px;
                margin: 0 auto 1.5rem;
            }
            
            .candidate-basic-info {
                text-align: center;
                width: 100%;
            }
            
            .candidate-basic-info .info-row {
                justify-content: center;
                gap: 1rem;
            }
            
            .sns-links {
                text-align: center;
            }
            
            .scroll-indicator {
                display: block;
            }
            
            .category-tabs {
                padding-bottom: 1rem;
                padding-left: 1rem;
            }
            
            .scroll-indicator {
                right: 0.25rem;
                font-size: 1rem;
                padding: 0.5rem;
            }
            
            .footer {
                padding: 1.5rem 0;
            }
        }
        
        @media (min-width: 1024px) {
            .footer {
                margin-top: 4rem;
                padding: 3rem 0;
            }
            
            .footer-link {
                font-size: 1rem;
            }
            
            .footer-info {
                font-size: 0.85rem;
            }
        }
        
        @media (min-width: 769px) {
            .scroll-indicator {
                display: none;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <a href="#" class="logo" onclick="showPage('home')">
                <div class="logo-icon">ğŸ—³ï¸</div>
                åŠ è³€ã¿ã‚‰ã„ãƒãƒ§ã‚¤ã‚¹
            </a>
            <div class="nav-links">
                <a href="#" onclick="showPage('home')">ãƒ›ãƒ¼ãƒ </a>
                <a href="#" onclick="showPage('candidates')">å€™è£œè€…ä¸€è¦§</a>
                <a href="#" onclick="showPage('comparison')">æ”¿ç­–æ¯”è¼ƒ</a>
            </div>
        </nav>
    </header>

    <main class="container">
        <!-- ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ -->
        <div id="home-page">
            <section class="hero">
                <h1>åŠ è³€å¸‚è­°ä¼šè­°å“¡é¸æŒ™2025</h1>
                <p class="hero-subtitle">ã‚ãªãŸã®ä¸€ç¥¨ã§ã€åŠ è³€å¸‚ã®æœªæ¥ã‚’é¸æŠã—ã‚ˆã†</p>
                <div class="hero-divider"></div>
            </section>

            <div class="quick-nav">
                <a href="#" class="quick-nav-item" onclick="showPage('candidates')">
                    <h3>ğŸ‘¥ å€™è£œè€…ä¸€è¦§</h3>
                    <p>ç«‹å€™è£œè€…ã®è©³ç´°æƒ…å ±ã¨æ”¿ç­–ã‚’ã”è¦§ã„ãŸã ã‘ã¾ã™</p>
                </a>
                <a href="#" class="quick-nav-item" onclick="showPage('comparison')">
                    <h3>ğŸ“Š æ”¿ç­–æ¯”è¼ƒ</h3>
                    <p>å„å€™è£œè€…ã®æ”¿ç­–ã‚’åˆ†é‡åˆ¥ã«æ¯”è¼ƒã§ãã¾ã™</p>
                </a>
            </div>

            <div class="election-info">
                <h2>ğŸ“… é¸æŒ™æƒ…å ±</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <strong>æŠ•ç¥¨æ—¥</strong>
                        <span>2025å¹´10æœˆ5æ—¥ï¼ˆæ—¥ï¼‰</span>
                    </div>
                    <div class="info-item">
                        <strong>å‘Šç¤ºæ—¥</strong>
                        <span>2025å¹´9æœˆ28æ—¥ï¼ˆåœŸï¼‰</span>
                    </div>
                    <div class="info-item">
                        <strong>æŠ•ç¥¨æ™‚é–“</strong>
                        <span>åˆå‰7æ™‚ã€œåˆå¾Œ8æ™‚</span>
                    </div>
                    <div class="info-item">
                        <strong>å®šæ•°</strong>
                        <span>18å</span>
                    </div>
                    <div class="info-item">
                        <strong>å‰å›æŠ•ç¥¨ç‡</strong>
                        <span>58.76%</span>
                    </div>
                    <div class="info-item">
                        <strong>æœŸæ—¥å‰æŠ•ç¥¨</strong>
                        <span>9æœˆ29æ—¥ã€œ10æœˆ4æ—¥</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å€™è£œè€…ä¸€è¦§ãƒšãƒ¼ã‚¸ -->
        <div id="candidates-page" class="hidden">
            <section class="hero">
                <h1>å€™è£œè€…ä¸€è¦§</h1>
                <p class="hero-subtitle">åŠ è³€å¸‚è­°ä¼šè­°å“¡é¸æŒ™2025ã®ç«‹å€™è£œè€…</p>
                <div class="hero-divider"></div>
            </section>

            <div class="candidates-grid">
                <div class="loading">å€™è£œè€…æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
            </div>
        </div>

        <!-- å€™è£œè€…è©³ç´°ãƒšãƒ¼ã‚¸ -->
        <div id="candidate-detail-page" class="hidden">
            <section class="hero">
                <h1>å€™è£œè€…è©³ç´°</h1>
                <div class="hero-divider"></div>
            </section>

            <div class="candidate-detail">
                <div class="candidate-header">
                    <div class="loading">å€™è£œè€…æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
                </div>

                <div class="policy-section">
                    <!-- APIã‹ã‚‰å‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ -->
                </div>
            </div>

            <div style="text-align: center; margin: 2rem 0;">
                <button onclick="showPage('candidates')" style="padding: 0.75rem 2rem; background: #3b82f6; color: white; border: none; border-radius: 25px; cursor: pointer; font-size: 0.9rem;">â† å€™è£œè€…ä¸€è¦§ã«æˆ»ã‚‹</button>
            </div>
        </div>

        <!-- å…¬ç´„æ¯”è¼ƒãƒšãƒ¼ã‚¸ -->
        <div id="comparison-page" class="hidden">
            <section class="hero">
                <h1>æ”¿ç­–æ¯”è¼ƒ</h1>
                <p class="hero-subtitle">åˆ†é‡åˆ¥ã«å€™è£œè€…ã®æ”¿ç­–ã‚’æ¯”è¼ƒã§ãã¾ã™</p>
                <div class="hero-divider"></div>
            </section>

            <div class="comparison-section">
                <div class="category-scroll-container">
                    <div class="category-tabs">
                        <div class="loading">ã‚«ãƒ†ã‚´ãƒªã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
                    </div>
                    <div class="scroll-indicator">â†’</div>
                </div>

                <div id="category-content">
                    <div class="loading">å…¬ç´„ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
                </div>
            </div>
        </div>
    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-about">
                    <a href="https://surf-hedge-480.notion.site/26b6a817b5fe80c994e9ce34982feb69" 
                       target="_blank" 
                       rel="noopener noreferrer" 
                       class="footer-link">
                        åŠ è³€ã¿ã‚‰ã„ãƒãƒ§ã‚¤ã‚¹ã«ã¤ã„ã¦
                    </a>
                </div>
                <div class="footer-info">
                    <p class="footer-org">é‹å–¶ï¼šåŠ è³€ã¿ã‚‰ã„ãƒãƒ§ã‚¤ã‚¹é‹å–¶å§”å“¡ä¼š</p>
                    <p class="footer-contact">
                        é€£çµ¡å…ˆï¼š
                        <a href="mailto:kaga.democracy@gmail.com" class="footer-email">
                            kaga.democracy@gmail.com
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // APIè¨­å®š
        const API_URL = 'https://script.google.com/macros/s/AKfycbxYQFMMz-Xh2vIDrj6FznzbuunLbdK26_oWz32KM3YjOIgQ6cmDQNV1KzMIEElUp16K/exec';
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let candidatesData = [];
        let categoriesData = {};
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        document.addEventListener('DOMContentLoaded', function() {
            loadCandidatesData();
            updateScrollIndicator();
        });
        
        // APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆé«˜é€ŸåŒ–ç‰ˆï¼‰
        async function loadCandidatesData() {
            try {
                console.log('ğŸš€ APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...', new Date().toLocaleTimeString());
                
                // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã‚’æ”¹å–„
                showLoadingState();
                
                // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šé–‹å§‹
                const startTime = performance.now();
                
                // CORSã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªfetchã‚’è©¦è¡Œ
                let response;
                try {
                    response = await fetch(API_URL);
                } catch (corsError) {
                    console.warn('âš ï¸ Standard fetch failed, trying with minimal headers');
                    response = await fetch(API_URL, {
                        method: 'GET',
                        mode: 'cors',
                        credentials: 'omit'
                    });
                }
                
                const fetchTime = performance.now() - startTime;
                console.log(`ğŸ“¡ Fetchå®Œäº†: ${fetchTime.toFixed(2)}ms`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const parseStartTime = performance.now();
                const data = await response.json();
                const parseTime = performance.now() - parseStartTime;
                console.log(`ğŸ”„ JSONè§£æå®Œäº†: ${parseTime.toFixed(2)}ms`);
                
                if (!Array.isArray(data) || data.length === 0) {
                    throw new Error('ãƒ‡ãƒ¼ã‚¿ãŒç©ºã¾ãŸã¯ç„¡åŠ¹ãªå½¢å¼ã§ã™');
                }
                
                candidatesData = data;
                console.log('å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿:', candidatesData);
                
                // ãƒ‡ãƒãƒƒã‚°: å„å€™è£œè€…ã®ã‚­ãƒ¼ä¸€è¦§ã‚’è¡¨ç¤º
                candidatesData.forEach((candidate, index) => {
                    console.log(`å€™è£œè€…${index + 1}ã®ã‚­ãƒ¼ä¸€è¦§:`, Object.keys(candidate));
                    console.log(`å€™è£œè€…${index + 1}ã®æ°åã‚­ãƒ¼æ¤œç´¢:`, 
                        Object.keys(candidate).filter(key => key.includes('æ°å') || key.includes('åå‰'))
                    );
                });
                
                // ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ï¼ˆé«˜é€ŸåŒ–ï¼‰
                const processStartTime = performance.now();
                processCandidatesData();
                const processTime = performance.now() - processStartTime;
                console.log(`âš™ï¸ ãƒ‡ãƒ¼ã‚¿å‡¦ç†å®Œäº†: ${processTime.toFixed(2)}ms`);
                
                // UIã‚’æ›´æ–°ï¼ˆä¸¦åˆ—å®Ÿè¡Œã§é«˜é€ŸåŒ–ï¼‰
                const uiStartTime = performance.now();
                await Promise.all([
                    new Promise(resolve => {
                        requestAnimationFrame(() => {
                            updateCandidatesList();
                            resolve();
                        });
                    }),
                    new Promise(resolve => {
                        requestAnimationFrame(() => {
                            updateComparisonData();
                            resolve();
                        });
                    })
                ]);
                
                const uiTime = performance.now() - uiStartTime;
                const totalTime = performance.now() - startTime;
                console.log(`ğŸ¨ UIæ›´æ–°å®Œäº†: ${uiTime.toFixed(2)}ms`);
                console.log(`âœ… å…¨ä½“å®Œäº†æ™‚é–“: ${totalTime.toFixed(2)}ms`);
                
                // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’è§£é™¤
                hideLoadingState();
                
            } catch (error) {
                console.error('APIå–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                hideLoadingState();
                showError('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãå¾Œã«å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
            }
        }
        
        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’è¡¨ç¤ºï¼ˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰
        function showLoadingState() {
            const loadingHtml = `
                <div class="loading" style="display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 2rem;">
                    <div style="width: 40px; height: 40px; border: 3px solid #e5e7eb; border-top: 3px solid #3b82f6; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 1rem;"></div>
                    <div style="font-weight: 600; color: #3b82f6; margin-bottom: 0.5rem;">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
                    <div style="font-size: 0.85rem; color: #6b7280;">ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„</div>
                </div>
                <style>
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                </style>
            `;
            
            const candidatesGrid = document.querySelector('.candidates-grid');
            const categoryTabs = document.querySelector('.category-tabs');
            const categoryContent = document.getElementById('category-content');
            
            if (candidatesGrid) candidatesGrid.innerHTML = loadingHtml;
            if (categoryTabs) categoryTabs.innerHTML = '<div class="loading">ğŸ·ï¸ ã‚«ãƒ†ã‚´ãƒªã‚’æº–å‚™ä¸­...</div>';
            if (categoryContent) categoryContent.innerHTML = '<div class="loading">ğŸ“‹ æ”¿ç­–ãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ä¸­...</div>';
        }
        
        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’è§£é™¤
        function hideLoadingState() {
            // ç‰¹åˆ¥ãªå‡¦ç†ã¯ä¸è¦ï¼ˆupdateCandidatesListç­‰ã§ä¸Šæ›¸ãã•ã‚Œã‚‹ï¼‰
        }
        
        // ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã—ã¦ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«æ•´ç†ï¼ˆåŸºæœ¬æƒ…å ±ã¯é™¤å¤–ï¼‰
        function processCandidatesData() {
            categoriesData = {};
            
            candidatesData.forEach(candidate => {
                Object.keys(candidate).forEach(key => {
                    // ã‚«ãƒ†ã‚´ãƒªæƒ…å ±ã‚’æŠ½å‡ºï¼ˆåŸºæœ¬æƒ…å ±ã¯é™¤å¤–ï¼‰
                    const categoryMatch = key.match(/ã€(\d+_[^ã€‘]+)ã€‘(.+)/);
                    if (categoryMatch && !key.includes('00_åŸºæœ¬æƒ…å ±')) {
                        const categoryName = categoryMatch[1];
                        const questionText = categoryMatch[2];
                        const answer = candidate[key];
                        
                        if (!categoriesData[categoryName]) {
                            categoriesData[categoryName] = {};
                        }
                        
                        if (!categoriesData[categoryName][questionText]) {
                            categoriesData[categoryName][questionText] = [];
                        }
                        
                        const candidateName = getCandidateValue(candidate, [
                            'ã€00_åŸºæœ¬æƒ…å ±ã€‘æ°å',
                            'ã€00_åŸºæœ¬æƒ…å ±ã€‘æ°åï¼ˆãµã‚ŠãŒãªï¼‰',
                            'ã€åŸºæœ¬æƒ…å ±ã€‘æ°å',
                            'ã€åŸºæœ¬æƒ…å ±ã€‘æ°åï¼ˆãµã‚ŠãŒãªï¼‰',
                            'æ°åï¼ˆãµã‚ŠãŒãªï¼‰',
                            'æ°å',
                            'åå‰'
                        ]) || 'ä¸æ˜';
                        
                        const candidateParty = getCandidateValue(candidate, [
                            'ã€00_åŸºæœ¬æƒ…å ±ã€‘æ‰€å±æ”¿å…š',
                            'ã€åŸºæœ¬æƒ…å ±ã€‘æ‰€å±æ”¿å…š',
                            'æ‰€å±æ”¿å…š',
                            'æ”¿å…š'
                        ]) || 'ç„¡æ‰€å±';
                        
                        categoriesData[categoryName][questionText].push({
                            name: candidateName,
                            party: candidateParty,
                            answer: answer || 'å›ç­”ãªã—'
                        });
                    }
                });
            });
            
            console.log('å‡¦ç†ã•ã‚ŒãŸã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒ¼ã‚¿:', categoriesData);
        }
        
        // å€™è£œè€…ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å€¤ã‚’å®‰å…¨ã«å–å¾—ã™ã‚‹é–¢æ•°
        function getCandidateValue(candidate, searchTerms) {
            for (const term of searchTerms) {
                const value = candidate[term];
                if (value && value.toString().trim()) {
                    return value.toString().trim();
                }
            }
            
            // éƒ¨åˆ†ä¸€è‡´ã§ã®æ¤œç´¢
            const keys = Object.keys(candidate);
            for (const term of searchTerms) {
                const matchKey = keys.find(key => key.includes(term.replace(/ã€.*?ã€‘/, '')));
                if (matchKey && candidate[matchKey] && candidate[matchKey].toString().trim()) {
                    return candidate[matchKey].toString().trim();
                }
            }
            
            return null;
        }
        
        // å€™è£œè€…ä¸€è¦§ã‚’æ›´æ–°
        function updateCandidatesList() {
            const candidatesGrid = document.querySelector('.candidates-grid');
            if (!candidatesGrid || candidatesData.length === 0) return;
            
            candidatesGrid.innerHTML = '';
            
            candidatesData.forEach((candidate, index) => {
                // ã‚ˆã‚ŠæŸ”è»Ÿãªå€™è£œè€…ãƒ‡ãƒ¼ã‚¿å–å¾—
                const name = getCandidateValue(candidate, [
                    'ã€00_åŸºæœ¬æƒ…å ±ã€‘æ°å',
                    'ã€00_åŸºæœ¬æƒ…å ±ã€‘æ°åï¼ˆãµã‚ŠãŒãªï¼‰',
                    'ã€åŸºæœ¬æƒ…å ±ã€‘æ°å',
                    'ã€åŸºæœ¬æƒ…å ±ã€‘æ°åï¼ˆãµã‚ŠãŒãªï¼‰',
                    'æ°åï¼ˆãµã‚ŠãŒãªï¼‰',
                    'æ°å',
                    'åå‰',
                    'name'
                ]) || `å€™è£œè€…${index + 1}`;
                
                const age = getCandidateValue(candidate, [
                    'ã€00_åŸºæœ¬æƒ…å ±ã€‘å¹´é½¢',
                    'ã€åŸºæœ¬æƒ…å ±ã€‘å¹´é½¢', 
                    'å¹´é½¢',
                    'age'
                ]) || 'ä¸æ˜';
                
                const party = getCandidateValue(candidate, [
                    'ã€00_åŸºæœ¬æƒ…å ±ã€‘æ‰€å±æ”¿å…š',
                    'ã€åŸºæœ¬æƒ…å ±ã€‘æ‰€å±æ”¿å…š',
                    'æ‰€å±æ”¿å…š',
                    'æ”¿å…š',
                    'party'
                ]) || 'ç„¡æ‰€å±';
                
                const experience = getCandidateValue(candidate, [
                    'ã€00_åŸºæœ¬æƒ…å ±ã€‘å½“é¸å›æ•°',
                    'ã€åŸºæœ¬æƒ…å ±ã€‘å½“é¸å›æ•°',
                    'å½“é¸å›æ•°',
                    'å½“é¸æ­´',
                    'election_history'
                ]) || 'ä¸æ˜';
                
                const imageUrl = getCandidateValue(candidate, [
                    'ã€00_åŸºæœ¬æƒ…å ±ã€‘ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã‚’æ·»ä»˜ã—ã¦ãã ã•ã„ã€‚',
                    'ã€åŸºæœ¬æƒ…å ±ã€‘ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ',
                    'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ',
                    'ç”»åƒ',
                    'photo_url',
                    'image'
                ]) || '';
                
                console.log(`å€™è£œè€…${index + 1}: åå‰="${name}", å¹´é½¢="${age}", æ”¿å…š="${party}"`);
                
                // æ”¿å…šã«å¿œã˜ãŸã‚¯ãƒ©ã‚¹
                const partyClass = getPartyClass(party);
                
                const candidateCard = document.createElement('div');
                candidateCard.className = 'candidate-card';
                candidateCard.onclick = () => showCandidateDetail(index);
                
                candidateCard.innerHTML = `
                    <div class="candidate-photo">
                        ${imageUrl ? 
                            `<img src="${toDriveImageUrl(imageUrl)}" alt="${name}ã®å†™çœŸ" 
                                  onerror="handleImageError(this, '${name}');" 
                                  loading="lazy" 
                                  decoding="async"
                                  referrerpolicy="no-referrer"
                                  style="transition: opacity 0.3s ease;">` : 
                            '<span style="font-size: 0.8rem; color: #6b7280; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%;">å†™çœŸ<br>æº–å‚™ä¸­</span>'
                        }
                    </div>
                    <div class="candidate-name">${name}</div>
                    <div class="candidate-info">
                        å¹´é½¢: ${age}æ­³<br>
                        å½“é¸æ­´: ${experience}
                    </div>
                    <div class="party-badge ${partyClass}">${party}</div>
                `;
                
                candidatesGrid.appendChild(candidateCard);
            });
        }
        
        // Google Driveã®URLã‚’ç”»åƒè¡¨ç¤ºç”¨ã«å¤‰æ›ï¼ˆORBå¯¾å¿œç‰ˆï¼‰
        function toDriveImageUrl(url, size = 400) {
            if (!url || typeof url !== 'string') {
                console.warn('âš ï¸ Invalid image URL provided:', url);
                return '';
            }
            
            console.log('ğŸ“· Processing image URL:', url);
            
            // è¤‡æ•°ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¯¾å¿œã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«IDã‚’æŠ½å‡º
            let fileId = null;
            
            const patterns = [
                /\/file\/d\/([a-zA-Z0-9_-]+)\/view/,  // /file/d/ID/view
                /\/file\/d\/([a-zA-Z0-9_-]+)/,       // /file/d/ID
                /\/d\/([a-zA-Z0-9_-]+)/,             // /d/ID
                /id=([a-zA-Z0-9_-]+)/,               // id=ID
                /open\?id=([a-zA-Z0-9_-]+)/,         // open?id=ID
                /^([a-zA-Z0-9_-]{25,})$/             // IDã®ã¿
            ];
            
            for (const pattern of patterns) {
                const match = url.match(pattern);
                if (match) {
                    fileId = match[1];
                    break;
                }
            }
            
            if (!fileId) {
                console.warn('âš ï¸ Could not extract file ID from URL:', url);
                return url; // å¤‰æ›ã§ããªã„å ´åˆã¯å…ƒURLã‚’è¿”ã™
            }
            
            console.log('ğŸ“· Extracted file ID:', fileId);
            
            // ORBã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã™ã‚‹ãŸã‚ã€thumbnailã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ç”¨
            const imageUrl = `https://lh3.googleusercontent.com/d/${fileId}=w${size}-h${size}-c`;
            console.log('ğŸ“· Generated image URL:', imageUrl);
            
            return imageUrl;
        }
        
        // ç”»åƒèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼æ™‚ã®å‡¦ç†
        function handleImageError(img, candidateName = 'å€™è£œè€…') {
            console.warn('âš ï¸ Image load failed for:', candidateName, 'src:', img.src);
            
            // ä»£æ›¿URLã‚’è©¦è¡Œï¼ˆGoogle Driveã®åˆ¥ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰
            const currentSrc = img.src;
            if (currentSrc.includes('lh3.googleusercontent.com')) {
                // Googleãƒ‰ãƒ©ã‚¤ãƒ–ã®UCã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è©¦è¡Œ
                const fileIdMatch = currentSrc.match(/\/d\/([a-zA-Z0-9_-]+)/);
                if (fileIdMatch) {
                    const altUrl = `https://drive.google.com/uc?export=view&id=${fileIdMatch[1]}`;
                    console.log('ğŸ”„ Trying alternative URL:', altUrl);
                    img.src = altUrl;
                    
                    // ä»£æ›¿URLã§ã‚‚å¤±æ•—ã—ãŸå ´åˆã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®š
                    img.onerror = function() {
                        console.warn('âŒ Alternative URL also failed for:', candidateName);
                        img.style.display = 'none';
                        img.parentElement.innerHTML = `<span style="font-size: 0.8rem; color: #6b7280; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%;">å†™çœŸ<br>æº–å‚™ä¸­</span>`;
                    };
                    return; // ä»£æ›¿URLã‚’è©¦è¡Œä¸­
                }
            }
            
            // æœ€çµ‚çš„ãªãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤º
            img.style.display = 'none';
            img.parentElement.innerHTML = `<span style="font-size: 0.8rem; color: #6b7280; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%;">å†™çœŸ<br>æº–å‚™ä¸­</span>`;
        }
        
        // æ”¿å…šã«å¿œã˜ãŸCSSã‚¯ãƒ©ã‚¹ã‚’å–å¾—
        function getPartyClass(party) {
            if (party.includes('è‡ªæ°‘') || party.includes('è‡ªç”±æ°‘ä¸»')) return 'party-ldp';
            if (party.includes('ç«‹æ†²') || party.includes('ç«‹æ†²æ°‘ä¸»')) return 'party-constitutional';
            if (party.includes('å…¬æ˜')) return 'party-komeito';
            if (party.includes('ç¶­æ–°') || party.includes('æ—¥æœ¬ç¶­æ–°')) return 'party-ishin';
            if (party.includes('å…±ç”£') || party.includes('æ—¥æœ¬å…±ç”£')) return 'party-communist';
            if (party.includes('å›½æ°‘') || party.includes('å›½æ°‘æ°‘ä¸»')) return 'party-kokumin';
            return 'party-independent';
        }
        
        // å…¬ç´„æ¯”è¼ƒãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
        function updateComparisonData() {
            updateCategoryTabs();
        }
        
        // ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ã‚’æ›´æ–°
        function updateCategoryTabs() {
            const categoryTabs = document.querySelector('.category-tabs');
            if (!categoryTabs) return;
            
            const categories = Object.keys(categoriesData).sort();
            
            categoryTabs.innerHTML = '';
            categories.forEach((category, index) => {
                const displayName = category.replace(/^\d+_/, '');
                const button = document.createElement('button');
                button.className = `category-tab ${index === 0 ? 'active' : ''}`;
                button.textContent = displayName;
                button.setAttribute('data-category', displayName);
                button.onclick = () => showCategory(index, category);
                categoryTabs.appendChild(button);
            });
            
            // æœ€åˆã®ã‚«ãƒ†ã‚´ãƒªã‚’è¡¨ç¤º
            if (categories.length > 0) {
                updateCategoryContent(categories[0]);
            }
        }
        
        // ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
        function showError(message) {
            const candidatesGrid = document.querySelector('.candidates-grid');
            const categoryTabs = document.querySelector('.category-tabs');
            const categoryContent = document.getElementById('category-content');
            
            if (candidatesGrid) candidatesGrid.innerHTML = `<div class="loading">${message}</div>`;
            if (categoryTabs) categoryTabs.innerHTML = `<div class="loading">${message}</div>`;
            if (categoryContent) categoryContent.innerHTML = `<div class="loading">${message}</div>`;
        }

        function showPage(pageId) {
            // ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã‚’éè¡¨ç¤º
            document.getElementById('home-page').classList.add('hidden');
            document.getElementById('candidates-page').classList.add('hidden');
            document.getElementById('comparison-page').classList.add('hidden');
            document.getElementById('candidate-detail-page').classList.add('hidden');
            
            // æŒ‡å®šã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º
            document.getElementById(pageId + '-page').classList.remove('hidden');
        }

        function showCandidateDetail(candidateIndex) {
            if (candidatesData.length > candidateIndex) {
                updateCandidateDetailPage(candidateIndex);
            }
            showPage('candidate-detail');
        }
        
        // å€™è£œè€…è©³ç´°ãƒšãƒ¼ã‚¸ã‚’æ›´æ–°
        function updateCandidateDetailPage(candidateIndex) {
            const candidate = candidatesData[candidateIndex];
            if (!candidate) return;
            
            const name = getCandidateValue(candidate, [
                'ã€00_åŸºæœ¬æƒ…å ±ã€‘æ°å',
                'ã€00_åŸºæœ¬æƒ…å ±ã€‘æ°åï¼ˆãµã‚ŠãŒãªï¼‰',
                'ã€åŸºæœ¬æƒ…å ±ã€‘æ°å',
                'ã€åŸºæœ¬æƒ…å ±ã€‘æ°åï¼ˆãµã‚ŠãŒãªï¼‰',
                'æ°åï¼ˆãµã‚ŠãŒãªï¼‰',
                'æ°å',
                'åå‰'
            ]) || 'å€™è£œè€…';
            
            const age = getCandidateValue(candidate, [
                'ã€00_åŸºæœ¬æƒ…å ±ã€‘å¹´é½¢',
                'ã€åŸºæœ¬æƒ…å ±ã€‘å¹´é½¢',
                'å¹´é½¢'
            ]) || 'ä¸æ˜';
            
            const party = getCandidateValue(candidate, [
                'ã€00_åŸºæœ¬æƒ…å ±ã€‘æ‰€å±æ”¿å…š',
                'ã€åŸºæœ¬æƒ…å ±ã€‘æ‰€å±æ”¿å…š',
                'æ‰€å±æ”¿å…š',
                'æ”¿å…š'
            ]) || 'ç„¡æ‰€å±';
            
            const experience = getCandidateValue(candidate, [
                'ã€00_åŸºæœ¬æƒ…å ±ã€‘å½“é¸å›æ•°',
                'ã€åŸºæœ¬æƒ…å ±ã€‘å½“é¸å›æ•°',
                'å½“é¸å›æ•°',
                'å½“é¸æ­´'
            ]) || 'ä¸æ˜';
            
            const imageUrl = getCandidateValue(candidate, [
                'ã€00_åŸºæœ¬æƒ…å ±ã€‘ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã‚’æ·»ä»˜ã—ã¦ãã ã•ã„ã€‚',
                'ã€åŸºæœ¬æƒ…å ±ã€‘ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ',
                'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ',
                'ç”»åƒ'
            ]) || '';
            
            // SNSãƒªãƒ³ã‚¯ã‚’å–å¾—
            const snsLinks = [];
            for (let i = 1; i <= 5; i++) {
                const url = candidate[`ã€00_åŸºæœ¬æƒ…å ±ã€‘ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚„SNSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®URL${i === 1 ? 'â‘ ' : i === 2 ? 'â‘¡' : i === 3 ? 'â‘¢' : i === 4 ? 'â‘£' : 'â‘¤'}`];
                if (url && url.trim()) {
                    snsLinks.push(url.trim());
                }
            }
            
            // åŸºæœ¬æƒ…å ±ã‚’æ›´æ–°
            const candidateHeader = document.querySelector('.candidate-header');
            if (candidateHeader) {
                let snsHtml = '';
                if (snsLinks.length > 0) {
                    snsHtml = `
                        <div class="sns-links">
                            <h4>ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãƒ»SNS</h4>
                            ${snsLinks.map(url => {
                                const displayText = getSNSDisplayName(url);
                                const fullUrl = url.startsWith('http') ? url : `https://${url}`;
                                return `<a href="${fullUrl}" target="_blank" rel="noopener">${displayText}</a>`;
                            }).join('')}
                        </div>
                    `;
                }
                
                candidateHeader.innerHTML = `
                    <div class="candidate-photo-large">
                        ${imageUrl ? 
                            `<img src="${toDriveImageUrl(imageUrl, 600)}" alt="${name}ã®å†™çœŸ" 
                                  onerror="handleImageError(this, '${name}');" 
                                  loading="lazy" 
                                  referrerpolicy="no-referrer">` : 
                            '<span style="font-size: 1rem; color: #6b7280; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%;">å†™çœŸ<br>æº–å‚™ä¸­</span>'
                        }
                    </div>
                    <div class="candidate-basic-info">
                        <h2>${name}</h2>
                        <div class="info-row">
                            <span>å¹´é½¢:</span>
                            <span>${age}æ­³</span>
                        </div>
                        <div class="info-row">
                            <span>å½“é¸æ­´:</span>
                            <span>${experience}</span>
                        </div>
                        <div class="info-row">
                            <span>æ”¿å…š:</span>
                            <span class="party-badge ${getPartyClass(party)}">${party}</span>
                        </div>
                        ${snsHtml}
                    </div>
                `;
            }
            
            // æ”¿ç­–ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°ï¼ˆå…¨é …ç›®è¡¨ç¤ºç‰ˆï¼‰
            const policySection = document.querySelector('.policy-section');
            if (policySection) {
                let policiesHtml = '<h3>æ”¿ç­–</h3>';
                
                // å…¨å€™è£œè€…ã‹ã‚‰å…¨ã¦ã®ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆé …ç›®ã‚’åé›†
                const allQuestions = getAllQuestionItems();
                
                // ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
                const questionsByCategory = {};
                allQuestions.forEach(questionKey => {
                    const categoryMatch = questionKey.match(/ã€(\d+_[^ã€‘]+)ã€‘(.+)/);
                    if (categoryMatch && !questionKey.includes('00_åŸºæœ¬æƒ…å ±')) {
                        const fullCategoryName = categoryMatch[1]; // æ•°å­—ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä»˜ãã®ã‚«ãƒ†ã‚´ãƒªåã‚’ä¿æŒ
                        const categoryName = fullCategoryName.replace(/^\d+_/, ''); // è¡¨ç¤ºç”¨ã‹ã‚‰æ•°å­—ã‚’é™¤å»
                        const questionText = categoryMatch[2];
                        
                        if (!questionsByCategory[fullCategoryName]) {
                            questionsByCategory[fullCategoryName] = [];
                        }
                        
                        questionsByCategory[fullCategoryName].push({
                            key: questionKey,
                            text: questionText
                        });
                    }
                });
                
                // ã‚ˆã‚Šæ­£ç¢ºãªé †åºåˆ¶å¾¡ - æ•°å­—ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã‚½ãƒ¼ãƒˆ
                const sortedCategories = Object.keys(questionsByCategory).sort((a, b) => {
                    // æ•°å­—ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼ˆ01_, 02_ãªã©ï¼‰ã§ã‚½ãƒ¼ãƒˆ
                    const aNum = parseInt(a.match(/^(\d+)/)?.[1] || '999');
                    const bNum = parseInt(b.match(/^(\d+)/)?.[1] || '999');
                    
                    if (aNum !== bNum) {
                        return aNum - bNum;
                    }
                    
                    // æ•°å­—ãŒåŒã˜ã‹ãªã„å ´åˆã¯åå‰ã§ã‚½ãƒ¼ãƒˆ
                    return a.localeCompare(b);
                });
                
                sortedCategories.forEach(fullCategoryName => {
                    const categoryName = fullCategoryName.replace(/^\d+_/, '');
                    const questions = questionsByCategory[fullCategoryName];

                    
                    // ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼
                    policiesHtml += `
                        <div style="margin-top: 2rem; margin-bottom: 1rem; padding: 0.75rem; background: linear-gradient(135deg, #3b82f6, #1e40af); color: white; border-radius: 8px; font-weight: 600;">
                            ğŸ“‹ ${categoryName}
                        </div>
                    `;
                    
                    questions.forEach(question => {
                        const answer = candidate[question.key];
                        const displayAnswer = (answer && answer.toString().trim()) ? answer.toString().trim() : 'å›ç­”ãªã—';
                        const answerClass = (answer && answer.toString().trim()) ? '' : ' style="color: #9ca3af; font-style: italic;"';
                        
                        policiesHtml += `
                            <div class="policy-item">
                                <div><strong>Q:</strong> ${question.text}</div>
                                <div${answerClass}><strong>A:</strong> ${displayAnswer}</div>
                            </div>
                        `;
                    });
                });
                
                policySection.innerHTML = policiesHtml;
            }
        }
        
        // å…¨å€™è£œè€…ã‹ã‚‰å…¨ã¦ã®ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆé …ç›®ã‚’åé›†ã™ã‚‹é–¢æ•°
        function getAllQuestionItems() {
            const allQuestions = new Set();
            
            candidatesData.forEach(candidate => {
                Object.keys(candidate).forEach(key => {
                    // åŸºæœ¬æƒ…å ±ä»¥å¤–ã®ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆé …ç›®ã‚’åé›†
                    if (key.includes('ã€') && key.includes('ã€‘') && !key.includes('00_åŸºæœ¬æƒ…å ±')) {
                        allQuestions.add(key);
                    }
                });
            });
            
            // Set ã‚’é…åˆ—ã«å¤‰æ›ã—ã¦ã‚½ãƒ¼ãƒˆ
            return Array.from(allQuestions).sort();
        }
        
        // SNSã®URLã‹ã‚‰è¡¨ç¤ºåã‚’å–å¾—
        function getSNSDisplayName(url) {
            const lowerUrl = url.toLowerCase();
            if (lowerUrl.includes('twitter') || lowerUrl.includes('x.com')) return 'X (Twitter)';
            if (lowerUrl.includes('facebook')) return 'Facebook';
            if (lowerUrl.includes('instagram')) return 'Instagram';
            if (lowerUrl.includes('youtube')) return 'YouTube';
            if (lowerUrl.includes('tiktok')) return 'TikTok';
            if (lowerUrl.includes('line')) return 'LINE';
            if (lowerUrl.includes('mixi')) return 'mixi';
            if (lowerUrl.includes('ameba')) return 'Ameba';
            return 'ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ';
        }

        function showCategory(categoryIndex, categoryKey = null) {
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–
            document.querySelectorAll('.category-tab')[categoryIndex].classList.add('active');
            
            // ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
            if (categoryKey && categoriesData[categoryKey]) {
                updateCategoryContent(categoryKey);
            }
        }
        
        // ã‚«ãƒ†ã‚´ãƒªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ›´æ–°
        function updateCategoryContent(categoryKey) {
            const categoryContent = document.getElementById('category-content');
            if (!categoryContent) return;
            
            const questions = categoriesData[categoryKey];
            let contentHtml = '';
            
            Object.keys(questions).forEach((questionText, index) => {
                const answers = questions[questionText];
                
                contentHtml += `
                    <div class="question-card">
                        <div class="question-header" onclick="toggleQuestion('${categoryKey}-${index}')">
                            <span class="question-title">${questionText}</span>
                            <span class="question-arrow">â–¼</span>
                        </div>
                        <div class="question-content" id="question-${categoryKey}-${index}">
                `;
                
                answers.forEach(answer => {
                    if (answer.answer && answer.answer.trim()) {
                        contentHtml += `
                            <div class="answer-item">
                                <div class="answer-candidate">${answer.name}ï¼ˆ${answer.party}ï¼‰</div>
                                <div class="answer-text">${answer.answer}</div>
                            </div>
                        `;
                    }
                });
                
                contentHtml += `
                        </div>
                    </div>
                `;
            });
            
            categoryContent.innerHTML = contentHtml;
        }

        function toggleQuestion(questionId) {
            const content = document.getElementById('question-' + questionId);
            if (!content) return;
            
            const header = content.previousElementSibling;
            const arrow = header.querySelector('.question-arrow');
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                arrow.textContent = 'â–¼';
            } else {
                content.classList.add('active');
                arrow.textContent = 'â–²';
            }
        }

        // ã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ©Ÿèƒ½
        function updateScrollIndicator() {
            const tabsContainer = document.querySelector('.category-tabs');
            const scrollIndicator = document.querySelector('.scroll-indicator');
            
            if (!tabsContainer || !scrollIndicator) return;
            
            function checkScroll() {
                const isScrollable = tabsContainer.scrollWidth > tabsContainer.clientWidth;
                const isAtEnd = tabsContainer.scrollLeft >= (tabsContainer.scrollWidth - tabsContainer.clientWidth - 10);
                
                if (isScrollable && !isAtEnd) {
                    scrollIndicator.style.opacity = '1';
                } else {
                    scrollIndicator.style.opacity = '0';
                }
            }
            
            tabsContainer.addEventListener('scroll', checkScroll);
            window.addEventListener('resize', checkScroll);
            setTimeout(checkScroll, 100);
        }
    </script>
</body>
</html>

